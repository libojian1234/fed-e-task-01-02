## GC定义与作用
- GC就是垃圾回收机制的简写
- GC可以找到内存中的垃圾、并释放和回收空间
- 算法就是工作时查找和回收所遵循的规则

## GC里的垃圾是什么
- 程序中不再需要使用对象
````javascript
function func(){
    name - 'lg'
    return `${name} is a coder`
}
````
````javascript
function func(){
    const name - 'lg'
    return `${name} is a coder`
}
````

## 常见GC算法
- 引用计数
- 标记清除
- 标记整理
- 分代回收

### 1. 引用计数算法
- 核心思想：计数引用数，判断当前引用数是否为0
- 引用计数器
- 引用关系改变时修改引用数字
- 引用数字为0时立即回收

````javascript
const user = {age: 11}
function fn() {
    const num = 1
}
fn()
````
> 当fn执行完后，window下访问不到num，num的计数器会减一为0，GC就会工作，把num垃圾回收

### 引用计数算法的优点
- 发现垃圾时立即回收
- 最大限度减少程序暂停（当内存要爆满时，引用计数会立即找到引用计数为0的对象空间，对其进行释放）

### 引用计数算法的缺点
- 无法回收循环引用的对象
````javascript
function () {
    const obj1 = {}
    const obj = {}
    obj1.name = obj2
    obj2.name = obj1
    return 'lg is a coder'
}
````
这里存在循环引用
- 时间开销大

### 2. 标记清除算法
- 核心思想：分标记和清除两个阶段完成
- 遍历所有对象找标记活动对象
- 遍历所有对象清除没有标记的对象
- 回收相应的空间（放入当前的空闲链表中，方便程序利用）
### 标记清除算法的优点
- 相对于引用计数算法，可解决无法回收循环引用对象的问题
### 标记清除算法的缺点
- 回收相应空间放入空闲链表，会导致空间的碎片化
- 不能立即回收垃圾对象（要等到标记遍历结束后才清除垃圾对象，而且清除的时候程序是停止工作的）

### 3. 标记整理算法原理
- 标记整理可以看作是标记清楚的增强
- 标记阶段的操作和标记清除算法一致
- 清除阶段会先执行整理，移动对象位置（这样就可以得到连续的空间地址，不会导致空间的碎片化）
### 标记整理算法的优点
- 相对于引用计数算法，可解决无法回收循环引用对象的问题
- 相对于标记清除算法，不会导致空间碎片化
### 标记整理算法的缺点
- 不能立即回收垃圾对象（要等到标记遍历结束后才清除垃圾对象，而且清除的时候程序是停止工作的）